{"mappings":"AAAA,MAAMA,EAAQC,SAASC,cAAc,aAC/BC,EAAYF,SAASC,cAAc,iBAEzCF,EAAMI,iBAAiB,SAyCvB,WACE,IAAIC,EAAU,EAEd,IAAIF,EAAUG,UAAUC,SAAQ,CAACC,EAAKC,IAAOD,EAAIE,YAAc,KAC/D,MAAMC,EAAW,IAAIR,EAAUG,UAAUM,KAAI,CAACJ,EAAKC,KAAMI,OAwBpCC,EAxBkDL,EAyBhE,IAAIM,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACMC,KAAKC,SAEP,GACXJ,EAAQ,MAELC,EAAI,KAAI,GAEZ,IAAOH,EAAM,IAVpB,IAAuBA,CAxBoD,IAEzEC,QAAQM,WAAWV,GAAUW,MAAKC,IAChCA,EAAMhB,SAAQ,CAACiB,EAAMf,KACnBS,YAAW,KACW,cAAhBM,EAAKC,SACPpB,GAAW,GAEbF,EAAUG,SAASG,GAAGC,YAAcc,EAAKE,OAASF,EAAKG,OAEvDT,YAAW,KACLf,EAAUG,SAASsB,OAAS,IAAMnB,IAChCJ,IAAYF,EAAUG,SAASsB,QAAWvB,EAG5CwB,MAAM,aAFNA,MAAM,U,GAKT,IAAI,GACF,IAAJpB,EAAS,GACZ,G","sources":["src/index.js"],"sourcesContent":["const start = document.querySelector('.js-start');\nconst container = document.querySelector('.js-container');\n\nstart.addEventListener('click', onStart);\n\n// function onStart(evt) {\n//   const result = [];\n\n//   [...container.children].forEach((box, i) => (box.textContent = ''));\n//   [...container.children].forEach((box, i) => {\n//     createPromise(i)\n//       .then(smile => {\n//         box.textContent = smile;\n//         result.push('1');\n//       })\n//       .catch(smile => (box.textContent = smile))\n//       .finally(() => {\n//         setTimeout(() => {\n//           if (i === container.children.length - 1) {\n//             if (!result.length || result.length === 3) {\n//               alert('Winner');\n//             } else {\n//               alert('Try again');\n//             }\n//           }\n//         }, 500);\n//       });\n//   });\n// }\n\n// function createPromise(delay) {\n//   return new Promise((resolve, reject) => {\n//     setTimeout(() => {\n//       const random = Math.random();\n\n//       if (random > 0.5) {\n//         resolve('ðŸ˜€');\n//       } else {\n//         reject('ðŸ˜¡');\n//       }\n//     }, 1000 * delay);\n//   });\n// }\n\nfunction onStart() {\n  let counter = 0;\n\n  [...container.children].forEach((box, i) => (box.textContent = ''));\n  const promises = [...container.children].map((box, i) => createPromise(i));\n\n  Promise.allSettled(promises).then(items => {\n    items.forEach((item, i) => {\n      setTimeout(() => {\n        if (item.status === 'fulfilled') {\n          counter += 1;\n        }\n        container.children[i].textContent = item.value || item.reason;\n\n        setTimeout(() => {\n          if (container.children.length - 1 === i) {\n            if (counter === container.children.length || !counter) {\n              alert('Winner');\n            } else {\n              alert('Try again');\n            }\n          }\n        }, 500);\n      }, i * 1000);\n    });\n  });\n}\n\nfunction createPromise(delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const random = Math.random();\n\n      if (random > 0.5) {\n        resolve('ðŸ˜€');\n      } else {\n        reject('ðŸ˜¡');\n      }\n    }, 1000 * delay);\n  });\n}\n"],"names":["$1f0dc3b9307be026$var$start","document","querySelector","$1f0dc3b9307be026$var$container","addEventListener","counter","children","forEach","box","i","textContent","promises","map","$1f0dc3b9307be026$var$createPromise","delay","Promise","resolve","reject","setTimeout","Math","random","allSettled","then","items","item","status","value","reason","length","alert"],"version":3,"file":"index.fe6beb46.js.map"}